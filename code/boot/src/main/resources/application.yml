spring:
  r2dbc:
    url: r2dbc:postgresql://localhost:5432/admin
    username: admin
    password: admin
    initialization-mode: always

  security:
    oauth2:
      resourceserver:
        jwt:
          jwk-set-uri: http://localhost:7070/.well-known/jwks.json

---
spring:
  config:
    activate:
      on-profile: local
  r2dbc:
    url: r2dbc:postgresql://db:5432/admin
    username: ${DB_USERNAME:admin}
    password: ${DB_PASSWORD:admin}
    initialization-mode: always
  security:
    oauth2:
      resourceserver:
        jwt:
          jwk-set-uri: http://keycloak:8080/realms/local/protocol/openid-connect/certs
  kafka:
    bootstrap-servers: kafka:9092
  data:
    redis:
      host: redis
      port: 6379
  cache:
    type: redis
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  metrics:
    export:
      prometheus:
        enabled: true
logging:
  level:
    com.soul.fin: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"
---
spring:
  config:
    activate:
      on-profile: test
  r2dbc:
    url: r2dbc:h2:mem:///testdb
    username: sa
    password:
  security:
    enabled: false
  kafka:
    bootstrap-servers: localhost:9092
---
spring:
  config:
    activate:
      on-profile: prod
  r2dbc:
    url: r2dbc:postgresql://${DB_HOST:prod-db}:5432/admin
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
  security:
    oauth2:
      resourceserver:
        jwt:
          jwk-set-uri: ${KEYCLOAK_URL}/.well-known/jwks.json
  kafka:
    bootstrap-servers: ${KAFKA_BOOTSTRAP_SERVERS}
  data:
    redis:
      host: ${REDIS_HOST}
      port: ${REDIS_PORT:6379}
  cache:
    type: redis
